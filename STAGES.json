{
    "project_goal": "A web-first (Next.js + FastAPI) railway tampering system accepting real photo/video evidence via Clerk-authenticated mobile uploads, processed by YOLOv8, and displayed on a laptop dashboard.",
    "stages": [
        {
            "id": "1_scaffolding",
            "title": "Repo Scaffolding & Cleanup",
            "description": "Clean up legacy files and initialize the new frontend/backend structure.",
            "status": "completed",
            "tasks": [
                "Delete legacy files: run_complete_system.py, test_system.py, test_detections.py, setup.py, client/, server/mqtt_server.py, docker-compose.yml, scripts/install_mqtt.sh, scripts/run_demo.py, server/anomaly_detector.py, tests/test_detector.py, QUICKSTART.md",
                "Create new folder structure: backend/ (FastAPI), frontend/ (Next.js), uploads/, frames/, reports/",
                "Move yolov8n.pt to models/",
                "Update requirements.txt with: fastapi, uvicorn, python-multipart, sqlalchemy, aiofiles",
                "Update README.md for new Web-First architecture"
            ]
        },
        {
            "id": "2_backend_core",
            "title": "FastAPI Backend & Uploads",
            "description": "Implement media upload handling and frame extraction.",
            "status": "completed",
            "tasks": [
                "Create backend/database.py: Define SQLite schema for Media and Incident",
                "Create backend/main.py: Setup FastAPI app, CORS, and POST /api/v1/media/upload",
                "Implement frame extraction logic: 1 fps extraction using ffmpeg"
            ]
        },
        {
            "id": "3_ml_pipeline",
            "title": "YOLOv8 Inference Pipeline",
            "description": "Integrate the ML model to process uploaded media.",
            "status": "in_progress",
            "tasks": [
                "Create backend/ml_worker.py: Load 'models/yolov8n.pt' (or trained weights)",
                "Implement processing loop: Run YOLO on extracted frames",
                "Implement Aggregator: Compute 'Tampering Score' and create Incident records"
            ]
        },
        {
            "id": "4_frontend_upload",
            "title": "Next.js Frontend: Uploads",
            "description": "Build the mobile-friendly upload UI.",
            "status": "pending",
            "tasks": [
                "Initialize Next.js app in frontend/",
                "Setup Clerk authentication (ClerkProvider)",
                "Create /upload page: File input (camera capture), geolocation, progress bar"
            ]
        },
        {
            "id": "5_dashboard",
            "title": "Operator Dashboard",
            "description": "Build the live incident view for the laptop.",
            "status": "pending",
            "tasks": [
                "Create /dashboard page: Poll /api/v1/incidents",
                "Implement MapCN (or Leaflet) integration for incident markers",
                "Add Incident Preview popup: Show key frame/video and Tampering Score"
            ]
        },
        {
            "id": "6_demo_prep",
            "title": "Demo & Ngrok Setup",
            "description": "Final polish for the live judge demo.",
            "status": "pending",
            "tasks": [
                "Configure ngrok for public access",
                "Verify mobile flow: Phone Upload -> Backend Process -> Laptop Dashboard Update",
                "Create local run script for one-command startup"
            ]
        }
    ]
}