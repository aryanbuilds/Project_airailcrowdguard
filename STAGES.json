{
    "project_goal": "A web-first (Next.js + FastAPI) railway tampering system accepting real photo/video evidence via mobile uploads, processed by a TWO-STAGE YOLOv8 pipeline, and displayed on a laptop dashboard with real-time logs.",
    "stages": [
        {
            "id": "1_scaffolding",
            "title": "Repo Scaffolding & Cleanup",
            "status": "completed",
            "tasks": [
                "Delete legacy MQTT files",
                "Create new folder structure: backend/, frontend/, uploads/, frames/, reports/",
                "Update requirements.txt for FastAPI stack"
            ]
        },
        {
            "id": "2_backend_core",
            "title": "FastAPI Backend & Uploads",
            "status": "completed",
            "tasks": [
                "Create backend/database.py: SQLite schema for Media and Incident",
                "Create backend/main.py: FastAPI app with POST /api/v1/media/upload",
                "Implement frame extraction using ffmpeg"
            ]
        },
        {
            "id": "3_ml_pipeline",
            "title": "Two-Stage YOLOv8 Inference Pipeline",
            "status": "completed",
            "tasks": [
                "Train Binary Model (v4i dataset): defective/non-defective",
                "Train Detailed Model (v1i dataset): 9 defect classes",
                "Copy weights to models/binary_model.pt and models/detailed_model.pt",
                "Test cascade inference: Working correctly!",
                "Create backend/ml_worker.py: Integrate cascade into FastAPI"
            ]
        },
        {
            "id": "4_frontend_upload",
            "title": "Next.js Frontend: Uploads",
            "status": "completed",
            "tasks": [
                "Initialize Next.js app in frontend/",
                "Create /upload page: File input (camera capture), geolocation, progress bar",
                "Connect to FastAPI backend"
            ]
        },
        {
            "id": "5_dashboard",
            "title": "Operator Dashboard",
            "status": "completed",
            "tasks": [
                "Create /dashboard page: Poll /api/v1/incidents",
                "Implement Leaflet integration for incident markers",
                "Add Incident Preview popup: Show key frame/video and Tampering Score",
                "Remove Clerk Auth (Bypass Mode Implementation)"
            ]
        },
        {
            "id": "6_simulation_visuals",
            "title": "Simulation & Enhancements",
            "status": "completed",
            "tasks": [
                "Implement Moving Train simulation on Map",
                "Add Tampering Simulation logic",
                "Add Crash/Safety logic"
            ]
        },
        {
            "id": "7_video_pipeline",
            "title": "Video Analysis Pipeline",
            "status": "completed",
            "tasks": [
                "Implement annotated_video with OpenCV",
                "Add FFmpeg re-encoding for web playback",
                "Integrate Video Player in Dashboard Modal"
            ]
        },
        {
            "id": "8_monitoring",
            "title": "System Monitoring & Console",
            "status": "completed",
            "tasks": [
                "Create backend logging system (app.log)",
                "Create /console page for real-time logs",
                "Add Dashboard Navigation Links"
            ]
        }
    ],
    "current_focus": "System Maintenance & Demo",
    "remaining_work": [
        "1. Final Demo Polish",
        "2. ngrok Setup for Mobile Testing"
    ],
    "cleanup_needed": []
}